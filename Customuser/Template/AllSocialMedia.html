<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://kit.fontawesome.com/249b712e24.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <title>Hello, world!</title>

    <style>
        .content {
            background-color: rgb(181, 197, 197)
        }
        .fields{
            margin-top: 50px;
        }
        .apps{
            min-height: 80px;
            border: 1px solid black;
        }
       
    </style>


</head>

<body>
    <div class="row mt-4">
        <div class="col-md-4">
            <div class="row">
                <div class="col-md-6"></div>
                <div class="col-md-6">
                    <div class="text-center">
                        <button type="button" class="btn btn-primary w-50"  onclick="ShowApps()"><i
                                class="fa-solid fa-house fs-6 me-2"></i>Home</button>
                    </div>
                    <div class="text-center">
                        <button type="button" class="btn btn-primary mt-4 w-50"  onclick="ShowUserDetails()"><i class="fa-solid fa-user fs-6 me-2"></i>Profile </button>
                    </div>
                    <div class="text-center">
                        <button type="button" class="btn btn-primary mt-4 w-50"><i class="fa-solid fa-hand-point-up fs-6 me-2"></i>Points </button>
                    </div>
                    <div class="text-center">
                        <button type="button" class="btn btn-primary mt-4 w-50"><i class="fa-solid fa-list-check fs-6 me-2"></i>Tasks </button>
                    </div>
                    <div class="text-center">
                        <button type="button" class="btn btn-primary mt-4 w-50" onclick="Logout()"><i class="fa-solid fa-right-from-bracket fs-6 me-2"></i>Logout </button>
                    </div>
                </div>

            </div>

        </div>
        <div class="col-md-4 content">

            <div class="mt-4 apps">
                <div id="Table_Data">
                <table class="table">
                    <thead>
                        <tr>
                            <th class="text-center" style="width: 10%;">Image</th>
                            <th class="text-center" style="width: 70%;">App Name</th>
                            <th class="text-center" style="width: 20%;">Points</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for app in AppsData %}
                            <tr>
                                <td class="text-center" style="width: 10%;">
                                    <img width="50" height="50" src="http://{{ request.META.HTTP_HOST }}{{ app.image.url }}" alt="placeholder-thumbnail-document" />
                                </td>
                                <td class="text-center" style="width: 70%;">
                                    <h5>{{ app.app_name }}</h5>
                                    <a href="/social-media-details-page/{{ app.id }}" >View details</a>
                                </td>
                                <td class="text-center" style="width: 20%;">
                                    <button type="button" class="btn btn-primary">100 Points</button>
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                    </table>
                </div>

                <div id="Profile" style="display: none;">
                    <p id="UserName"></p>
                    <p id="UserEmail"></p>
                </div>
            </div>


            

        </div>
        <div class="col-md-4">

        </div>
    </div>

</body>

<script>

// Retrieve the data from localStorage
let storedData = localStorage.getItem('dataKey');
let UserObj = JSON.parse(storedData);
console.log(UserObj, '------------UserObj');

document.getElementById("UserName").innerHTML=UserObj.user.first_name;
document.getElementById("UserEmail").innerHTML=UserObj.user.email;


    function ShowUserDetails()
    {
      
        document.getElementById("Table_Data").style.display="none"; 
        document.getElementById("Profile").style.display="block";
    }

    function Logout()
    {
        localStorage.removeItem('dataKey');
        window.location.href = '/';
    }

    function ShowApps()
    {
    document.getElementById("Table_Data").style.display="block";
    document.getElementById("Profile").style.display="none";
    }
</script>

</html>